Marionette.Region=function(e){this.options=e||{},this.el=Marionette.getOption(this,"el"),this.el||throwError("An 'el' must be specified for a region.","NoElError");if(this.initialize){var t=Array.prototype.slice.apply(arguments);this.initialize.apply(this,t)}},_.extend(Marionette.Region,{buildRegion:function(e,t){var n=_.isString(e),r=_.isString(e.selector),i=_.isUndefined(e.regionType),s=_.isFunction(e);!s&&!n&&!r&&throwError("Region must be specified as a Region type, a selector string or an object with selector property");var o,u;n&&(o=e),e.selector&&(o=e.selector,delete e.selector),s&&(u=e),!s&&i&&(u=t),e.regionType&&(u=e.regionType,delete e.regionType);if(n||s)e={};e.el=o;var a=new u(e);return e.parentEl&&(a.getEl=function(t){var n=e.parentEl;return _.isFunction(n)&&(n=n()),n.find(t)}),a}}),_.extend(Marionette.Region.prototype,Backbone.Events,{show:function(e,t){this.ensureEl();var n=t||{},r=e.isClosed||_.isUndefined(e.$el),i=e!==this.currentView,s=!!n.preventClose,o=!s&&i;o&&this.close(),e.render(),Marionette.triggerMethod.call(this,"before:show",e),Marionette.triggerMethod.call(e,"before:show"),(i||r)&&this.open(e),this.currentView=e,Marionette.triggerMethod.call(this,"show",e),Marionette.triggerMethod.call(e,"show")},ensureEl:function(){if(!this.$el||this.$el.length===0)this.$el=this.getEl(this.el)},getEl:function(e){return Marionette.$(e)},open:function(e){this.$el.empty().append(e.el)},close:function(){var e=this.currentView;if(!e||e.isClosed)return;e.close?e.close():e.remove&&e.remove(),Marionette.triggerMethod.call(this,"close",e),delete this.currentView},attachView:function(e){this.currentView=e},reset:function(){this.close(),delete this.$el}}),Marionette.Region.extend=Marionette.extend;